syntax = "proto3";
option go_package = "../protos";

service FileSyncService {
  rpc AddDownloadTask(DownloadTaskRequest) returns (DownloadTaskResult) {}
  rpc GetDownloadInfoStream(DownloadInfoRequest) returns (stream DownLoadInfoResult) {}
  rpc GetDownloadInfo(DownloadInfoRequest) returns (DownLoadInfoResult) {}
  rpc CancelDownloadTask(DownloadTaskCancelRequest) returns (DownloadTaskCancelResult) {}
  rpc AddDownloadTaskByFileIDs(IDsDownloadRequest) returns (IDsDownloadResult) {}
}

message DownloadTaskRequest {
  string  url = 1;
  string  savePath = 2;
  string  fileName = 3;
  string  cookie = 4;
  DownloadInfoRequestType downLoadType = 5;
}

message DownloadTaskResult {
  string id = 1;
}

message DownloadTaskCancelRequest {
  string id = 1;
}

message DownloadTaskCancelResult {
  string status = 1;
}


enum DownloadInfoRequestType {
  All = 0;
  Queue = 1;
  Temp = 2;
}

message DownloadInfoRequest {
  optional string  id = 1;
  DownloadInfoRequestType type = 2;
}

message DownLoadInfoResult {
  DownloadInfoRequestType type = 1;
  bytes data = 2;
}

message IDsDownloadRequest {
  repeated string  ids = 1;
  string workingUrl = 2;
  string cookies = 3;
}

message IDsDownloadResult {
  int32  status = 1;
}